create_creator_camp(int id) {
camp_data = zoho.crm.getRecordById("Camps",id);
school_name = camp_data.get("School").get("name");
Camp_Start_Date = camp_data.get("Camp_Start_Date");
Camp_Due_Date = camp_data.get("Camp_Due_Date");
Camp_End_Date = camp_data.get("Camp_End_Date");
Camp_Locations = camp_data.get("Camp_Locations");
Name = camp_data.get("Name");
Number_of_Groups = camp_data.get("Number_of_Groups");
Number_of_Students = camp_data.get("Number_of_Students");
Year_Level = camp_data.get("Year_Level");
Camp_Medical_and_Dietary_Form_Link = camp_data.get("Camp_Medical_and_Dietary_Form_Link");
Camp_Medical_and_Dietary_Form_Link_for_Teachers = camp_data.get("Camp_Medical_and_Dietary_Form_Link_for_Teachers");
info Camp_Medical_and_Dietary_Form_Link_for_Teachers;
school_id = camp_data.get("School").get("id");
criteria = "CRM_ID == \"" + toString(school_id) + "\"";
info criteria;
org_data = zoho.creator.getRecords("sustainableadventuresptyltd","camp","All_Organisations",criteria,1,200,"zohocreatorconnection");
info org_data;
org_id = org_data.get("data").get(0).get("ID");
creator_camp_data = Map();
creator_camp_data.put("Camp_Name",Name);
creator_camp_data.put("Camp_Group_Number",Number_of_Groups);
creator_camp_data.put("School",org_id);
creator_camp_data.put("Status","Upcoming");
creator_camp_data.put("Camp_Location",Camp_Locations);
creator_camp_data.put("Year_Level",Year_Level);
creator_camp_data.put("Camp_Start_Date",toString(Camp_Start_Date,"dd-MMM-YYYY"));
creator_camp_data.put("Camp_End_Date",toString(Camp_End_Date,"dd-MMM-YYYY"));
creator_camp_data.put("Medical_and_Dietary_Form_Link",{"url":Camp_Medical_and_Dietary_Form_Link});
creator_camp_data.put("Medical_and_Dietary_Form_Link_for_Teachers",{"url":Camp_Medical_and_Dietary_Form_Link_for_Teachers});
creator_camp_data.put("Zoho_CRM_ID",id);
otherParams = Map();
response = zoho.creator.createRecord("sustainableadventuresptyltd","camp","Camps",creator_camp_data,otherParams,"zohocreatorconnection");
info response;
crm_update = Map();
crm_update.put("Creator_ID",response.get("data").get("ID"));
crm_update.put("Camp_Medical_and_Dietary_Form_Link","https://forms.adventurealternatives.com.au/AdventureAlternatives/form/MedicalandDietaryForm/formperma/GJ6MjHCkcJJFjUhLjGlxVEA4Jp_55QdSlAqlkEJ6laQ?camp_id=" + response.get("data").get("ID") + "&school=" + school_name);
crm_update.put("Camp_Medical_and_Dietary_Form_Link_for_Teachers","https://forms.adventurealternatives.com.au/AdventureAlternatives/form/MedicalandDietaryFormforTeachers/formperma/NPHs4BzwWcXiDg0Jo1dLAGBdakim6cNfoZO6R-ikou4?camp_id=" + response.get("data").get("ID") + "&school=" + school_name);
crm_update.put("Medical_Submissions","https://creatorapp.zohopublic.com/sustainableadventuresptyltd/camp/page-perma/Camp_Details/nnU0X2ApHUK7DsrKj4qhFKOBOD3bZaaMms0yM5kWAf9vFFEXGA8G4pTqM1f9AC5Sa5dvSrCSw6KJGRneY9P8mpnd53SCaCxbpQtC?camp_id=" + response.get("data").get("ID"));
Year_Level = Year_Level.lower().replaceFirst(" ","-");
crm_update.put("Camp_Web_Page","http://www.adventurealternatives.com.au/" + Year_Level + "?campid=" + id);
crm_update.put("Camp_Teacher_Web_Page","http://www.adventurealternatives.com.au/teachers?campid=" + id);
info zoho.crm.updateRecord("Camps",id,crm_update,{"trigger":{"workflow"}});
}
